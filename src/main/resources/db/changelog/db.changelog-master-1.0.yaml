databaseChangeLog:
  - changeSet:
      id: 1613883717741-1
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: time
                  type: datetime
              - column:
                  constraints:
                    nullable: false
                  name: code
                  type: TINYTEXT
              - column:
                  constraints:
                    nullable: false
                  name: secret_code
                  type: TINYTEXT
            tableName: captcha_codes
  - changeSet:
      id: 1613883717741-2
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: code
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: name
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: value
                  type: VARCHAR(255)
            tableName: global_settings
  - changeSet:
      id: 1613883717741-3
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  name: next_val
                  type: BIGINT
            tableName: hibernate_sequence
  - changeSet:
      id: 1613883717741-4
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  name: parent_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: post_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: user_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: time
                  type: datetime
              - column:
                  constraints:
                    nullable: false
                  name: text
                  type: TEXT
            tableName: post_comments
  - changeSet:
      id: 1613883717741-5
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: user_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: post_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: time
                  type: datetime
              - column:
                  constraints:
                    nullable: false
                  name: value
                  type: TINYINT(3)
            tableName: post_votes
  - changeSet:
      id: 1613883717741-6
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: is_active
                  type: TINYINT(3)
              - column:
                  constraints:
                    nullable: false
                  name: moderation_status
                  type: ENUM('NEW', 'ACCEPTED', 'DECLINED')
              - column:
                  name: moderator_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: user_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: time
                  type: datetime
              - column:
                  constraints:
                    nullable: false
                  name: title
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: text
                  type: TEXT
              - column:
                  constraints:
                    nullable: false
                  name: view_count
                  type: INT
            tableName: posts
  - changeSet:
      id: 1613883717741-7
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: post_id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: tag_id
                  type: INT
            tableName: tag2post
  - changeSet:
      id: 1613883717741-8
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: name
                  type: VARCHAR(255)
            tableName: tags
  - changeSet:
      id: 1613883717741-9
      author: dima_pak (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: id
                  type: INT
              - column:
                  constraints:
                    nullable: false
                  name: is_moderator
                  type: TINYINT(3)
              - column:
                  constraints:
                    nullable: false
                  name: reg_time
                  type: datetime
              - column:
                  constraints:
                    nullable: false
                  name: name
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: email
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: password
                  type: VARCHAR(255)
              - column:
                  name: code
                  type: VARCHAR(255)
              - column:
                  name: photo
                  type: TEXT
            tableName: users
  - changeSet:
      id: 1613883717741-10
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: user_id
            indexName: FK5lidm6cqbc7u4xhqpxm898qme
            tableName: posts
  - changeSet:
      id: 1613883717741-11
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: post_id
            indexName: FK9jh5u17tmu1g7xnlxa77ilo3u
            tableName: post_votes
  - changeSet:
      id: 1613883717741-12
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: user_id
            indexName: FK9q09ho9p8fmo6rcysnci8rocc
            tableName: post_votes
  - changeSet:
      id: 1613883717741-13
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: post_id
            indexName: FKaawaqxjs3br8dw5v90w7uu514
            tableName: post_comments
  - changeSet:
      id: 1613883717741-14
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: tag_id
            indexName: FKjou6suf2w810t2u3l96uasw3r
            tableName: tag2post
  - changeSet:
      id: 1613883717741-15
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: user_id
            indexName: FKn3a85163kl0kqw0g6uh7ck5xw
            tableName: post_comments
  - changeSet:
      id: 1613883717741-16
      author: dima_pak (generated)
      changes:
        - createIndex:
            columns:
              - column:
                  name: post_id
            indexName: FKpjoedhh4h917xf25el3odq20i
            tableName: tag2post
  - changeSet:
      id: 1613883717741-17
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: posts
            constraintName: FK5lidm6cqbc7u4xhqpxm898qme
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: users
            validate: true
  - changeSet:
      id: 1613883717741-18
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: post_id
            baseTableName: post_votes
            constraintName: FK9jh5u17tmu1g7xnlxa77ilo3u
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: posts
            validate: true
  - changeSet:
      id: 1613883717741-19
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: post_votes
            constraintName: FK9q09ho9p8fmo6rcysnci8rocc
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: users
            validate: true
  - changeSet:
      id: 1613883717741-20
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: post_id
            baseTableName: post_comments
            constraintName: FKaawaqxjs3br8dw5v90w7uu514
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: posts
            validate: true
  - changeSet:
      id: 1613883717741-21
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: tag_id
            baseTableName: tag2post
            constraintName: FKjou6suf2w810t2u3l96uasw3r
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: tags
            validate: true
  - changeSet:
      id: 1613883717741-22
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: post_comments
            constraintName: FKn3a85163kl0kqw0g6uh7ck5xw
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: post_comments
            validate: true
  - changeSet:
      id: 1613883717741-23
      author: dima_pak (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: post_id
            baseTableName: tag2post
            constraintName: FKpjoedhh4h917xf25el3odq20i
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: posts
            validate: true

  - changeSet:
      id: insertUsers1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: is_moderator
                  value: 1
              - column:
                  name: reg_time
                  value: '2021-01-15 12:47:32'
              - column:
                  name: name
                  value: "Sam"
              - column:
                  name: email
                  value: "samemail@mail.com"
              - column:
                  name: password
                  value: "samPassword"
              - column:
                  name: code
                  value: "samCode"
              - column:
                  name: photo
                  value: "samPhoto"
            dbms: '!h2,  mysql'
            schemaName: usersTable
            tableName: users

  - changeSet:
      id: insertUsers2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: is_moderator
                  value: 0
              - column:
                  name: reg_time
                  value: '2021-01-23 11:27:32'
              - column:
                  name: name
                  value: "Joe"
              - column:
                  name: email
                  value: "joeemail@mail.com"
              - column:
                  name: password
                  value: "joePassword"
              - column:
                  name: code
                  value: "joeCode"
              - column:
                  name: photo
                  value: "joePhoto"
            dbms: '!h2,  mysql'
            schemaName: usersTable
            tableName: users

  - changeSet:
      id: insertUsers3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: is_moderator
                  value: 1
              - column:
                  name: reg_time
                  value: '2021-02-21 09:27:32'
              - column:
                  name: name
                  value: "Eliot"
              - column:
                  name: email
                  value: "eliotemail@mail.com"
              - column:
                  name: password
                  value: "eliotPassword"
              - column:
                  name: code
                  value: "eliotCode"
              - column:
                  name: photo
                  value: "eliotPhoto"
            dbms: '!h2,  mysql'
            schemaName: usersTable
            tableName: users

  - changeSet:
      id: insertUsers
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 4
              - column:
                  name: is_moderator
                  value: 1
              - column:
                  name: reg_time
                  value: '2020-11-23 13:27:32'
              - column:
                  name: name
                  value: "Jack"
              - column:
                  name: email
                  value: "lackemail@mail.com"
              - column:
                  name: password
                  value: "jackPassword"
              - column:
                  name: code
                  value: "jackCode"
              - column:
                  name: photo
                  value: "jackPhoto"
            dbms: '!h2,  mysql'
            schemaName: usersTable
            tableName: users

  - changeSet:
      id: insertPosts1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: "ACCEPTED"
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: time
                  value: '2020-08-14 15:20:32'
              - column:
                  name: title
                  value: "Green Book"
              - column:
                  name: text
                  value: "You have to watch this film"
              - column:
                  name: view_count
                  value: 80
            dbms: '!h2,  mysql'
            schemaName: postTable
            tableName: posts

  - changeSet:
      id: insertPosts2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: "ACCEPTED"
              - column:
                  name: moderator_id
                  value:
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: time
                  value: '2020-12-10 18:55:32'
              - column:
                  name: title
                  value: "Matrix"
              - column:
                  name: text
                  value: "Great SyFy movie"
              - column:
                  name: view_count
                  value: 90
            dbms: '!h2,  mysql'
            schemaName: postTable
            tableName: posts

  - changeSet:
      id: insertPosts3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: "ACCEPTED"
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: time
                  value: '2020-03-30 10:45:32'
              - column:
                  name: title
                  value: "Green Mile"
              - column:
                  name: text
                  value: "Probably best work of Frank Darabont"
              - column:
                  name: view_count
                  value: 150
            dbms: '!h2,  mysql'
            schemaName: postTable
            tableName: posts

  - changeSet:
      id: insertPosts
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 4
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: "NEW"
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 4
              - column:
                  name: time
                  value: '2020-05-05 16:11:32'
              - column:
                  name: title
                  value: "Pulp Fiction"
              - column:
                  name: text
                  value: "One of the best movies ever"
              - column:
                  name: view_count
                  value: 100
            dbms: '!h2,  mysql'
            schemaName: postTable
            tableName: posts

  - changeSet:
      id: insertPostVotes1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: time
                  value: '2020-04-18 10:43:32'
              - column:
                  name: value
                  value: 1
            dbms: '!h2,  mysql'
            schemaName: postVotesTable
            tableName: post_votes

  - changeSet:
      id: insertPostVotes2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: time
                  value: '2020-05-09 17:27:32'
              - column:
                  name: value
                  value: 1
            dbms: '!h2,  mysql'
            schemaName: postVotesTable
            tableName: post_votes

  - changeSet:
      id: insertPostVotes3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: time
                  value: '2020-06-13 15:34:32'
              - column:
                  name: value
                  value: -1
            dbms: '!h2,  mysql'
            schemaName: postVotesTable
            tableName: post_votes

  - changeSet:
      id: insertTags1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: name
                  value: "SyFy"
            dbms: '!h2,  mysql'
            schemaName: tagsTable
            tableName: tags

  - changeSet:
      id: insertTags2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: name
                  value: "Drama"
            dbms: '!h2,  mysql'
            schemaName: tagsTable
            tableName: tags

  - changeSet:
      id: insertTags3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: name
                  value: "Triller"
            dbms: '!h2,  mysql'
            schemaName: tagsTable
            tableName: tags

  - changeSet:
      id: insertTag2Post3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: tag_id
                  value: 2
            dbms: '!h2,  mysql'
            schemaName: tag2postTable
            tableName: tag2post

  - changeSet:
      id: insertTag2Post2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: tag_id
                  value: 1
            dbms: '!h2,  mysql'
            schemaName: tag2postTable
            tableName: tag2post

  - changeSet:
      id: insertTag2Post1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: post_id
                  value: 3
              - column:
                  name: tag_id
                  value: 3
            dbms: '!h2,  mysql'
            schemaName: tag2postTable
            tableName: tag2post

  - changeSet:
      id: globalSettings1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: code
                  value: "MULTIUSER_MODE"
              - column:
                  name: name
                  value: "Многопользовательский режим"
              - column:
                  name: value
                  value: "YES"
            dbms: '!h2,  mysql'
            schemaName: globalSettingsTable
            tableName: global_settings

  - changeSet:
      id: globalSettings2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: code
                  value: "POST_PREMODERATION"
              - column:
                  name: name
                  value: "Премодерация постов"
              - column:
                  name: value
                  value: "YES"
            dbms: '!h2,  mysql'
            schemaName: globalSettingsTable
            tableName: global_settings

  - changeSet:
      id: globalSettings3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: code
                  value: "STATISTICS_IS_PUBLIC"
              - column:
                  name: name
                  value: "Показывать всем статистику блога"
              - column:
                  name: value
                  value: "YES"
            dbms: '!h2,  mysql'
            schemaName: globalSettingsTable
            tableName: global_settings

  - changeSet:
      id: insertPostComment1
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 1
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: time
                  value: '2020-10-18 10:43:32'
              - column:
                  name: text
                  value: "I love this movie"
            dbms: '!h2,  mysql'
            schemaName: postCommemtsTable
            tableName: post_comments

  - changeSet:
      id: insertPostComment2
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 2
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: time
                  value: '2020-10-20 12:48:32'
              - column:
                  name: text
                  value: "I think it's overrated"
            dbms: '!h2,  mysql'
            schemaName: postCommemtsTable
            tableName: post_comments

  - changeSet:
      id: insertPostComment3
      author: dima_pak
      changes:
        - insert:
            catalogName: thesis
            columns:
              - column:
                  name: id
                  value: 3
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: time
                  value: '2020-12-28 09:15:32'
              - column:
                  name: text
                  value: "One of the best SyFy movies I ever seen"
            dbms: '!h2,  mysql'
            schemaName: postCommemtsTable
            tableName: post_comments